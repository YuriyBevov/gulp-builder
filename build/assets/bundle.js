(()=>{"use strict";function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var n=function(){function n(o){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,n),t(this,"bodyLocker",(function(e){i.isInited?document.querySelector("body").style.overflow=e?"hidden":"auto":console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),t(this,"focusTrap",(function(){if(i.isInited){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',o=i.modal.querySelectorAll(e)[0],t=i.modal.querySelectorAll(e),n=t[t.length-1];document.addEventListener("keydown",(function e(t){var i="Tab"===t.key||9===t.key;"Escape"===t.key&&document.removeEventListener("keydown",e),i&&(t.shiftKey?document.activeElement===o&&(n.focus(),t.preventDefault()):document.activeElement===n&&(o.focus(),t.preventDefault()))})),o.focus()}else console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),t(this,"addListeners",(function(){i.isInited?(i.openers.forEach((function(e){e.removeEventListener("click",i.openModal)})),document.addEventListener("click",i.closeByOverlayClick),document.addEventListener("keydown",i.closeByEscBtn),i.close.addEventListener("click",i.closeByBtnClick)):console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),t(this,"refresh",(function(){i.isInited?(i.isBodyLocked&&i.bodyLocker(!1),document.removeEventListener("click",i.closeByOverlayClick),document.removeEventListener("keydown",i.closeByEscBtn),i.close.removeEventListener("click",i.closeByBtnClick),i.overlay.classList.remove("is-opened"),i.modal.classList.remove("is-active"),i.openers.forEach((function(e){e.addEventListener("click",i.openModal)}))):console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),t(this,"closeByOverlayClick",(function(e){i.isInited?e.target===i.overlay&&i.refresh():console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),t(this,"closeByEscBtn",(function(e){i.isInited?"Escape"===e.key&&i.refresh():console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),t(this,"closeByBtnClick",(function(){i.isInited?i.refresh():console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),t(this,"openModal",(function(e){e.preventDefault(),i.isInited?(i.isBodyLocked&&i.bodyLocker(!0),i.overlay.classList.add("is-opened"),i.modal.classList.add("is-active"),i.addListeners(),i.focusTrap()):console.error("Для инициализации используй new Modal(_modal-selector_).init()")})),this.isBodyLocked=!!r.isBodyLocked,this.modal=o,this.id=this.modal.getAttribute("id"),this.openers=document.querySelectorAll('[data-modal-anchor="'+this.id+'"]'),this.isInited=!1,this.overlay=this.modal.parentNode,this.close=this.modal.querySelector(".modal__close")}var i,r;return i=n,(r=[{key:"init",value:function(){var e=this;this.openers?(this.isInited=!0,this.openers.forEach((function(o){o.addEventListener("click",e.openModal,e.modal,e.overlay)}))):console.error("Не добавлена кнопка открытия модального окна, либо в ней не прописан аттр-т: data-modal-anchor={modal-id} ")}}])&&o(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),n}();document.querySelectorAll(".modal").forEach((function(e){new n(e).init()}))})();
//# sourceMappingURL=bundle.js.map